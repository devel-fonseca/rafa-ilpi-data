// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  EVENTOS INSTITUCIONAIS (TENANT - Schema isolado)
//
//  Eventos da prÃ³pria instituiÃ§Ã£o (vencimentos, treinamentos, reuniÃµes, etc.)
//  âš ï¸ IMPORTANTE: Tabela ISOLADA por schema de tenant (nÃ£o compartilhada)
//  ğŸ“ LocalizaÃ§Ã£o: tenant_xxx.institutional_events (padrÃ£o snake_case)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

model InstitutionalEvent {
  id            String                       @id @default(uuid()) @db.Uuid
  tenantId      String                       @db.Uuid
  eventType     InstitutionalEventType
  visibility    InstitutionalEventVisibility @default(ALL_USERS)
  title         String
  description   String?                      @db.Text
  scheduledDate DateTime                     @db.Date
  scheduledTime String? // Formato HH:mm
  allDay        Boolean                      @default(false)
  status        ScheduledEventStatus         @default(SCHEDULED)
  completedAt   DateTime?                    @db.Timestamptz(3)
  notes         String?                      @db.Text

  // Campos especÃ­ficos para vencimento de documentos
  documentType   String?
  documentNumber String?
  expiryDate     DateTime? @db.Date
  responsible    String?

  // Campos especÃ­ficos para treinamentos
  trainingTopic  String?
  instructor     String?
  targetAudience String?
  location       String?

  // Metadados adicionais (JSON flexÃ­vel)
  metadata Json? @db.JsonB

  // Auditoria
  createdAt DateTime  @default(now()) @db.Timestamptz(3)
  updatedAt DateTime  @updatedAt @db.Timestamptz(3)
  deletedAt DateTime? @db.Timestamptz(3)
  createdBy String    @db.Uuid
  updatedBy String?   @db.Uuid

  // RelaÃ§Ãµes
  tenant        Tenant @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  createdByUser User   @relation("InstitutionalEventCreatedBy", fields: [createdBy], references: [id], onDelete: Restrict)
  updatedByUser User?  @relation("InstitutionalEventUpdatedBy", fields: [updatedBy], references: [id], onDelete: SetNull)

  // Ãndices
  @@index([tenantId])
  @@index([scheduledDate])
  @@index([eventType])
  @@index([visibility])
  @@index([status])
  @@index([deletedAt])
  @@index([tenantId, scheduledDate])
  @@index([tenantId, eventType, scheduledDate])
  @@index([expiryDate])
  @@map("institutional_events") // Segue padrÃ£o snake_case do projeto
}
